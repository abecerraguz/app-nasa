{{> partials/navbar }}

<div class="container">
    <div class="row">

   
    <div class="row">
      <form autocomplete="off">
        <h2 class="mt-2 text-center">ðŸ‘½ Bienvenido a LA NASA ðŸ‘½</h2>
        <hr>
         <p class="mt-3">{{> partials/title}} Registrese para poder pasar a evaluaciÃ³n</p>
        <div class="mb-4">
            {{!-- <label for="email" class="form-label">Email</label> --}}
            <input type="email" class="formInput" id="email" placeholder="Ingrese Email">
        </div>
        <div class="mb-4">
            {{!-- <label for="nombre" class="form-label">Nombre</label> --}}
            <input type="nombre" class="formInput" id="nombre" placeholder="Ingrese Nombre">
        </div>
        <div class="mb-4">
            {{!-- <label for="password" class="form-label">Password</label> --}}
            <input type="password" class="formInput" id="password" placeholder="Ingrese Password">
        </div>
        <div class="mb-3">
            <button id="registrarme" class="btn btn-success m-auto text-uppercase">Registrarme</button>
        </div>
      </form>

        <!-- Modal Mensaje -->
        <div class="modal fade" id="mensaje" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
            <div class="modal-body text-center text-uppercase my-2">
                Usuario registrado con Ã©xito !!<br>
                Usted serÃ¡ dirigido al Login 
            </div>
            </div>
        </div>
        </div>


<script>
   
    const buttonRegistrarse = document.querySelector("#registrarme");

    buttonRegistrarse.addEventListener("click",(e)=>{

        e.preventDefault();
    
        // Necesitamos seleccionar los input del "formulario"
        let email = document.querySelector("#email").value
        let nombre = document.querySelector("#nombre").value
        let password = document.querySelector("#password").value

        axios.post('http://localhost:3000/usuarios', {
            email,
            nombre,
            password
        })
        .then((response) => {
            console.log(response.data);
                $('#mensaje').modal('toggle');
            setTimeout(()=>{
                $('#mensaje').modal('toggle'); 
                 location.href = "http://localhost:3000/login"
            },5000)
        })
        .catch((error) => {
            console.log(error);
        });


        {{!-- 
            fetch("http://localhost:3000/usuarios",{
                method:"POST",
                body: JSON.stringify({ email,nombre,password }),
                headers:{
                    'Content-type': 'application/json'
                }
            }).then( res => res.json() )
                .then( data =>{
                    console.log('Salida de data', data)
                })
            
            
            .then( res => res.json()).then( data =>{
                console.log('Salida de data', data)
                alert("Usuario registrado con Ã©xito!!")
            }).catch( e => console.log(e)) 
        --}}

    })
</script>